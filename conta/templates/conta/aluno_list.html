{% extends 'menu.html' %}
{% load custom_filters %} 
{% block content %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<style>
    .card-custom {
        padding: 2.5rem !important;
    }
    .table-responsive {
        margin-top: 1.5rem;
    }
    .table th, .table td {
        vertical-align: middle;
        font-size: 0.95rem;
    }
    .table thead th {
        color: var(--cor-principal, #5c5f96);
        font-weight: bold;
    }
</style>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card-custom">
                
                <h1 class="text-center mb-4">Gerenciar Avaliadores (Alunos)</h1>
                
                <form method="GET" class="d-flex mb-4" action="">
                    <input type="search" 
                           name="q" 
                           class="form-control form-control-lg me-2" 
                           placeholder="Pesquisar aluno por nome..." 
                           value="{{ request.GET.q|default:'' }}" 
                           aria-label="Pesquisar aluno">
                    
                    <button class="btn btn-principal btn-lg" type="submit">
                        <i class="bi bi-search"></i>
                    </button>
                    
                    {% if search_query %}
                        <a href="{% url 'aluno_list' %}" class="btn btn-outline-secondary btn-lg ms-2" title="Limpar Pesquisa">
                            <i class="bi bi-x-lg"></i>
                        </a>
                    {% endif %}
                </form>

                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th style="width: 35%;">Nome</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th class="text-end" style="width: 120px;">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for aluno in alunos %}
                            <tr>
                                <td>{{ aluno.nome }}</td>
                                <td>{{ aluno.email }}</td>
                                
                                <td>{{ aluno.numero_telefone|mask_phone }}</td>
                                
                                <td class="text-end"> 
                                    <a href="{% url 'aluno_avaliacoes' aluno.id %}" class="btn btn-sm btn-info" title="Ver avaliações realizadas">
                                        <i class="bi bi-clipboard-check"></i> Avaliações
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center">Nenhum avaliador encontrado com esse nome.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}